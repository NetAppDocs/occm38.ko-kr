---
sidebar: sidebar 
permalink: task_sync_nfs_encryption.html 
keywords: encryption, in flight, data in flight, in-flight, data-in-flight, nfs, initiator, listener, port 
summary: 회사에 엄격한 보안 정책이 있는 경우 전송 중 데이터 암호화를 사용하여 서로 다른 네트워크에 있는 NFS 서버 간에 데이터를 동기화합니다. 
---
= 전송 중 데이터 암호화를 사용하여 NFS 데이터 동기화
:hardbreaks:
:allow-uri-read: 
:nofooter: 
:icons: font
:linkattrs: 
:imagesdir: ./media/


회사에 엄격한 보안 정책이 있는 경우 전송 중인 데이터 암호화를 사용하여 NFS 데이터를 동기화할 수 있습니다. 이 기능은 NFS 서버에서 다른 NFS 서버로, Azure NetApp Files에서 Azure NetApp Files로 지원됩니다.

예를 들어, 서로 다른 네트워크에 있는 두 NFS 서버 간에 데이터를 동기화할 수 있습니다. 또는 서브넷 또는 영역 간에 Azure NetApp Files의 데이터를 안전하게 전송해야 할 수 있습니다.



== 전송 중 데이터 암호화 작동 방식

전송 중인 데이터 암호화는 두 데이터 브로커 간에 네트워크를 통해 전송되는 NFS 데이터를 암호화합니다. 다음 이미지는 두 NFS 서버와 두 데이터 브로커 간의 관계를 보여 줍니다.

image:diagram_nfs_encryption.gif["NFS 서버 2개와 데이터 브로커 2개를 보여 주는 다이어그램 데이터는 소스 NFS 서버에서 소스 데이터 브로커로 전송됩니다. 이때 데이터는 암호화됩니다. 그런 다음 데이터를 타겟 데이터 브로커로 전송한 다음 타겟 NFS 서버로 전송합니다."]

하나의 데이터 브로커가 _initiator_로 작동합니다. 데이터를 동기화할 시간이 되면 다른 데이터 브로커, 즉 _listener_로 연결 요청을 보냅니다. 이 데이터 브로커는 포트 443에서 요청을 수신합니다. 필요한 경우 다른 포트를 사용할 수 있지만 포트가 다른 서비스에서 사용되고 있지 않은지 확인해야 합니다.

예를 들어, 온프레미스 NFS 서버의 데이터를 클라우드 기반 NFS 서버로 동기화하는 경우 연결 요청을 수신 대기하는 데이터 브로커를 선택할 수 있습니다.

전송 중 암호화 방식은 다음과 같습니다.

. 동기화 관계를 생성한 후 이니시에이터는 다른 데이터 브로커와 암호화된 연결을 시작합니다.
. 소스 데이터 브로커는 TLS 1.3을 사용하여 소스에서 데이터를 암호화합니다.
. 그런 다음 데이터를 네트워크를 통해 타겟 데이터 브로커로 전송합니다.
. 대상 데이터 브로커는 데이터를 타겟으로 전송하기 전에 해독합니다.
. 초기 복사 후, 서비스는 24시간마다 변경된 데이터를 동기화합니다. 동기화할 데이터가 있는 경우 이니시에이터에서 다른 데이터 브로커와 암호화된 연결을 여는 것으로 프로세스가 시작됩니다.
+
데이터를 더 자주 동기화하려는 경우 link:task_sync_managing_relationships.html#changing-the-settings-for-a-sync-relationship["관계를 만든 후에는 일정을 변경할 수 있습니다"].





== 지원되는 NFS 버전입니다

* NFS 서버의 경우 NFS 버전 3, 4.0, 4.1 및 4.2에서 전송 중인 데이터 암호화가 지원됩니다.
* Azure NetApp Files의 경우, NFS 버전 3 및 4.1에서 전송 중인 데이터 암호화가 지원됩니다.




== 시작하는 데 필요한 사항

다음 사항을 확인하십시오.

* 충족하는 NFS 서버 2대 link:reference_sync_requirements.html#source-and-target-requirements["소스 및 타겟 요구 사항"] 또는 두 개의 서브넷 또는 영역의 Azure NetApp Files.
* 서버의 IP 주소 또는 정규화된 도메인 이름입니다.
* 2개의 데이터 브로커를 위한 네트워크 위치.
+
기존 데이터 브로커를 선택할 수 있지만 이니시에이터로 작동해야 합니다. 수신기 데이터 브로커는 _new_data 브로커여야 합니다.

+
데이터 브로커를 아직 구축하지 않은 경우 데이터 브로커 요구사항을 검토하십시오. 엄격한 보안 정책이 있으므로 포트 443과 의 아웃바운드 트래픽을 포함하는 네트워킹 요구 사항을 검토하십시오 link:reference_sync_networking.html["인터넷 엔드포인트"] 데이터 브로커가 연결합니다.

+
** link:task_sync_installing_aws.html["AWS 설치를 검토합니다"]
** link:task_sync_installing_azure.html["Azure 설치를 검토합니다"]
** link:task_sync_installing_gcp.html["GCP 설치를 검토합니다"]
** link:task_sync_installing_linux.html["Linux 호스트 설치를 검토합니다"]






== 전송 중 데이터 암호화를 사용하여 NFS 데이터 동기화

두 NFS 서버 간 또는 Azure NetApp Files 간에 새 동기화 관계를 생성하고 전송 중 암호화 옵션을 설정한 다음 화면의 지시를 따릅니다.

.단계
. 새 동기화 만들기 * 를 클릭합니다.
. 소스 및 타겟 위치로 * NFS 서버 * 를 끌어다 놓거나 * Azure NetApp Files * 를 소스 및 타겟 위치로 끈 후 * 예 * 를 선택하여 전송 중인 데이터 암호화를 활성화합니다.
+
다음 이미지는 두 NFS 서버 간에 데이터를 동기화하기 위해 선택한 사항을 보여줍니다.

+
image:screenshot_nfs_encryption.gif["전송 중 데이터 암호화가 설정된 NFS와 NFS 간 동기화 관계를 보여 주는 스크린샷"]

+
다음 이미지는 Azure NetApp Files 간에 데이터를 동기화하기 위해 선택한 항목을 보여 줍니다.

+
image:screenshot_anf_encryption.gif["전송 중 데이터 암호화가 활성화된 Azure NetApp Files-Azure NetApp Files 동기화 관계를 보여 주는 스크린샷"]

. 프롬프트에 따라 관계를 생성합니다.
+
.. * NFS Server * / * Azure NetApp Files *: NFS 버전을 선택한 다음 새 NFS 소스를 지정하거나 기존 서버를 선택합니다.
.. * 데이터 브로커 기능 정의 *: 포트에서 연결 요청을 처리하는 데이터 브로커_listen_과 연결을 시작하는 데이터 브로커를 정의합니다. 네트워킹 요구 사항에 따라 선택할 수 있습니다.
.. * Data Broker *: 프롬프트에 따라 새 소스 데이터 브로커를 추가하거나 기존 데이터 브로커를 선택합니다.
+
소스 데이터 브로커가 수신기 역할을 하는 경우 새로운 데이터 브로커가 되어야 합니다.

+
새 데이터 브로커가 필요한 경우 Cloud Sync에 설치 지침이 표시됩니다. 클라우드에 데이터 브로커를 구축하거나 자체 Linux 호스트에 대한 설치 스크립트를 다운로드할 수 있습니다.

+
image:screenshot_create_data_broker.gif["AWS, Azure, Google Cloud Platform 또는 기존 Linux 호스트에서 데이터 브로커를 선택하는 옵션을 보여주는 스크린샷"]

.. * 디렉터리 *: 모든 디렉터리를 선택하거나 드릴다운 및 하위 디렉터리를 선택하여 동기화할 디렉터리를 선택합니다.
+
소스 파일 및 폴더가 대상 위치에서 동기화 및 유지 관리되는 방식을 정의하는 설정을 수정하려면 * 소스 개체 필터 * 를 클릭합니다.

+
image:screenshot_directories.gif["최상위 디렉토리를 선택하고 드릴다운한 다음 소스 객체 필터링 옵션을 선택하는 옵션을 보여 주는 스크린샷"]

.. * 타겟 NFS 서버 * / * 타겟 Azure NetApp Files *: NFS 버전을 선택한 다음 새 NFS 타겟을 입력하거나 기존 서버를 선택합니다.
.. * 대상 데이터 브로커 *: 프롬프트에 따라 새 소스 데이터 브로커를 추가하거나 기존 데이터 브로커를 선택합니다.
+
대상 데이터 브로커가 수신기 역할을 하는 경우 새 데이터 브로커가 되어야 합니다.

+
다음은 대상 데이터 브로커가 수신기로 작동할 때의 프롬프트의 예입니다. 포트를 지정하는 옵션을 확인합니다.

+
image:screenshot_nfs_encryption_listener.gif["수신기 데이터 브로커에서 포트를 지정하는 옵션을 보여 주는 스크린샷"]

.. * 대상 디렉터리 *: 최상위 디렉터리를 선택하거나 드릴다운하여 기존 하위 디렉터리를 선택하거나 내보내기 내에 새 폴더를 만듭니다.
.. * 설정 *: 원본 파일과 폴더가 대상 위치에서 동기화 및 유지되는 방식을 정의합니다.
.. * 검토 *: 동기화 관계의 세부 정보를 검토한 다음 * 관계 생성 * 을 클릭합니다.
+
image:screenshot_nfs_encryption_review.gif["검토 화면을 보여주는 스크린샷. NFS 서버, 데이터 브로커, 각각에 대한 네트워킹 정보가 표시됩니다."]





Cloud Sync에서 새 동기화 관계 생성을 시작합니다. 완료되면 * Dashboard * 에서 View를 클릭하여 새 관계에 대한 세부 정보를 봅니다.
